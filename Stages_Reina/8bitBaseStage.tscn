[gd_scene load_steps=6 format=2]

[ext_resource path="res://Character Sprites/ump9/ump9Idle.png" type="Texture" id=1]
[ext_resource path="res://Stages/TestStage/Tileset.tres" type="TileSet" id=2]
[ext_resource path="res://Stages_Reina/8bitBaseStage.tres.gd" type="Script" id=3]
[ext_resource path="res://Stages/DebugRoomBorders.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Sprite

#This object spawns a player as a child and then
#the base will grab the player variable.
#There isn't really any reason to have a holder for the player
#other than maybe adding multiplayer support. Which won't
#happen.

#A big thanks to the godot team for removing the ability to 
#set a size of Node2Ds in Godot 3.X, making me do this so I
#can drag around the player sprite!

#Honestly there is probably a better way to do this than
#using a Node2D or a sprite

export (int,\"Reina\",\"M16\") var player_to_spawn_in_debug=0
var player:KinematicBody2D

#Godot doesn't set exported variables until _ready() so
#this does not work
#func _init():
#	pass

func _ready():
	var playerToSpawn = player_to_spawn_in_debug
	if OS.is_debug_build():
		playerToSpawn = player_to_spawn_in_debug
		
	var n:Resource
	if playerToSpawn==0:
		n=load(\"res://Player Files/8bitPlayer/UMP9.tscn\")
	else:
		n=load(\"res://Player Files/8bitPlayer/M16.tscn\")
	player = n.instance()
	#print(self.position)
	var tempPos = self.position
	#print(tempPos)
	self.position=Vector2(0,0)
	player.position=tempPos
	self.scale=Vector2(1,1)
	add_child(player)
	self.texture=null
"

[node name="Node2D" type="Node2D"]
script = ExtResource( 3 )

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
bus = "Music"

[node name="TileMap" type="TileMap" parent="."]
scale = Vector2( 4, 4 )
tile_set = ExtResource( 2 )
cell_size = Vector2( 16, 16 )
show_collision = true
collision_layer = 48
format = 1

[node name="DebugRoomBorders" parent="." instance=ExtResource( 4 )]

[node name="PlayerHolder" type="Sprite" parent="."]
scale = Vector2( 4, 4 )
texture = ExtResource( 1 )
centered = false
script = SubResource( 1 )

[node name="BulletHolder" type="Node2D" parent="."]
